(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{121:function(e,t,n){},125:function(e,t,n){},126:function(e,t,n){"use strict";n.r(t);var a,i,r,c,s,o,l=n(0),j=n(9),u=n.n(j),d=n(42),b=n(48),p=n.n(b),h=n(56),g=n(57),x=n.n(g),O="https://movie-list-api-nikolaos-xeras.herokuapp.com",f=function(e){return x.a.post("".concat(O,"/movie/search"),e,{headers:{"Content-Type":"application/vnd.api+json",Accept:"application/vnd.api+json"}}).then((function(e){return e.data}))},m=n(50),v=function(e){return{id:e.id||"",name:e.attributes.name}},y=n(47),C=function(e){return Object(y.a)({_id:e.id||""},e.attributes)},w=function(e){m.b.error(e)},k=Object(d.b)("movies/getMovies",function(){var e=Object(h.a)(p.a.mark((function e(t){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f(t);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),I=Object(d.b)("movies/getGenres",function(){var e=Object(h.a)(p.a.mark((function e(t){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.a.get("".concat(O,"/genre"),{headers:{Accept:"application/vnd.api+json"}}).then((function(e){return e.data}));case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),S=Object(d.c)({name:"movies",initialState:{genres:[],searchResults:{movies:[],totalItems:0},loading:!1},extraReducers:function(e){e.addCase(k.pending,(function(e){e.loading=!0})).addCase(k.fulfilled,(function(e,t){var n;e.loading=!1,"object"===typeof t.payload&&null!==t.payload&&(e.searchResults={movies:(n=t.payload.data,n.map((function(e){return C(e)}))),totalItems:t.payload.meta.totalItems})})).addCase(k.rejected,(function(e,t){var n=t.error,a="Error in getting movies ".concat(n.message);e.loading=!1,w(a)})).addCase(I.fulfilled,(function(e,t){e.loading=!1,"object"===typeof t.payload&&null!==t.payload&&(e.genres=t.payload.data.map((function(e){return v(e)})))})).addCase(I.rejected,(function(e,t){var n=t.error,a="Error in getting genres ".concat(n.message);w(a),e.loading=!1}))}}),E=function(e){return e.movies.searchResults},M=function(e){return e.movies.genres},F=function(e){return e.movies.loading},P=S.reducer,R=Object(d.a)({reducer:{movies:P}}),_=n(34),A=n(82),G=n(13),L=n(18),T=n(160),W=n(19),z=n(155),J=n(158),B=n(159),D=n(4),q=function(){return Object(D.jsx)(z.a,{position:"sticky",children:Object(D.jsx)(J.a,{children:Object(D.jsx)(B.a,{children:"Movie List Exercise"})})})},H=W.a.div(a||(a=Object(L.a)(["\n  background-color: #3f51b5;\n  height: 16px;\n  color: white;\n  padding: 24px;\n  text-align: right;\n"]))),K=function(){return Object(D.jsx)(H,{children:"Copyright 2021"})},N=W.a.div(i||(i=Object(L.a)(["\n  min-height: calc(100vh - 168px);\n  margin-top: 20px;\n  margin-bottom: 20px;\n"]))),Q=function(e){var t=e.children;return Object(D.jsxs)(D.Fragment,{children:[Object(D.jsx)(q,{}),Object(D.jsx)(N,{children:Object(D.jsx)(T.a,{children:t})}),Object(D.jsx)(K,{})]})},U=n(46),V=n(165),X=n(161),Y=n(162),Z=n(163),$=n.p+"static/media/noImage.68acb357.jpg",ee=function(e){var t=e.imagePath,n=e.children;return Object(D.jsxs)(X.a,{style:{height:"100%"},children:[Object(D.jsx)(Y.a,{component:"img",alt:t?"poster":"no image available",src:t||$}),Object(D.jsx)(Z.a,{style:{position:"relative"},children:n})]})},te=n(172),ne=n(164),ae=W.a.div(r||(r=Object(L.a)(["\n  width: 50px;\n  height: 50px;\n  background-color: black;\n  border-radius: 50%;\n  color: white;\n"]))),ie=function(e){var t=e.rating;return Object(D.jsx)(te.a,{position:"absolute",display:"inline-flex",top:-30,right:2,children:Object(D.jsxs)(ae,{children:[Object(D.jsx)(ne.a,{variant:"determinate",size:50,thickness:4,value:t}),Object(D.jsx)(te.a,{top:0,left:0,bottom:0,right:0,position:"absolute",display:"flex",alignItems:"center",justifyContent:"center",children:Object(D.jsx)(B.a,{variant:"subtitle2",component:"div",style:{fontWeight:600},children:"".concat(Math.round(t),"%")})})]})})},re=function(e){var t=e.movieList,n=void 0===t?[]:t;return Object(D.jsx)(V.a,{container:!0,spacing:2,children:n.map((function(e){var t=e.poster_path,n=e.title,a=e.id,i=e.release_date,r=e.vote_average;return Object(D.jsx)(V.a,{item:!0,sm:4,md:3,lg:2,children:Object(D.jsxs)(ee,{imagePath:t,children:[Object(D.jsx)(B.a,{children:n}),Object(D.jsxs)(B.a,{variant:"subtitle2",children:["(",i,")"]}),Object(D.jsx)(ie,{rating:10*r})]})},a)}))})},ce=n(166),se=n(174),oe=n(170),le=n(176),je=n(177),ue=n(169),de=W.a.form(c||(c=Object(L.a)(["\n  margin-bottom: 40px;\n  display: flex;\n  justify-content: center;\n  flex-wrap: wrap;\n"]))),be=function(e){var t=e.setSearchFields,n=e.genres,a=void 0===n?[]:n,i=Object(l.useState)(""),r=Object(U.a)(i,2),c=r[0],s=r[1],o=Object(l.useState)(""),j=Object(U.a)(o,2),u=j[0],d=j[1];return Object(D.jsxs)(de,{onSubmit:function(e){e.preventDefault(),t({title:u,genre:c,page:1})},children:[Object(D.jsxs)(ce.a,{children:[Object(D.jsx)(se.a,{id:"genre",children:"Genre"}),Object(D.jsxs)(oe.a,{name:"genre",id:"genre",value:c,onChange:function(e){var t=e.target;s(t.value)},style:{minWidth:"150px"},children:[Object(D.jsx)(le.a,{value:"",children:"All"}),a&&a.map((function(e){var t=e.id,n=e.name;return Object(D.jsx)(le.a,{value:t,children:n},t)}))]})]}),Object(D.jsx)(je.a,{name:"title",id:"title",label:"Movie Title",value:u,onChange:function(e){var t=e.target;d(t.value)},style:{margin:"0px 20px",maxWidth:"500px",flexGrow:1}}),Object(D.jsx)(ue.a,{size:"medium",type:"submit",style:{marginTop:"15px"},children:"Search"})]})},pe=n(173),he=W.a.div(s||(s=Object(L.a)(["\n  float: right;\n  margin-bottom: 10px;\n"]))),ge=function(e){var t=e.totalItems,n=void 0===t?0:t,a=e.page,i=void 0===a?1:a,r=e.handlePageChange;return Object(D.jsx)(he,{children:Object(D.jsx)(pe.a,{count:Math.ceil(n/10),page:i,onChange:r})})},xe=W.a.div(o||(o=Object(L.a)(["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  margin-top: 200px;\n"]))),Oe=function(){return Object(D.jsx)(xe,{children:Object(D.jsx)(ne.a,{})})},fe={title:"",genre:"",page:1},me=function(){var e=Object(_.b)(),t=Object(l.useState)(fe),n=Object(U.a)(t,2),a=n[0],i=n[1],r=Object(_.c)(E),c=r.movies,s=r.totalItems,o=Object(_.c)(F),j=Object(_.c)(M);return Object(l.useEffect)((function(){e(k(a))}),[a,e]),Object(l.useEffect)((function(){e(I())}),[e]),Object(D.jsxs)(D.Fragment,{children:[Object(D.jsx)(be,{setSearchFields:i,genres:j}),Object(D.jsx)(ge,{totalItems:s,handlePageChange:function(e,t){i(Object(y.a)(Object(y.a)({},a),{},{page:t}))},page:a.page}),o?Object(D.jsx)(Oe,{}):Object(D.jsx)(re,{movieList:c})]})},ve=(n(121),n(122),function(){return Object(D.jsx)(A.a,{children:Object(D.jsxs)(G.d,{children:[Object(D.jsxs)(Q,{children:[Object(D.jsx)(m.a,{}),Object(D.jsx)(G.b,{exact:!0,path:"/",children:Object(D.jsx)(me,{})})]}),Object(D.jsx)(G.b,{path:"*",children:Object(D.jsx)(G.a,{to:"/"})})]})})});n(125);u.a.render(Object(D.jsx)(_.a,{store:R,children:Object(D.jsx)(ve,{})}),document.getElementById("root"))}},[[126,1,2]]]);
//# sourceMappingURL=main.853f0ec0.chunk.js.map